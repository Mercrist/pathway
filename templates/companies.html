{% extends 'base.html' %}

{% block htmlclass %}class="index"{% endblock %}

{% block head %}
<title>Explore Companies</title>
{% endblock %}

{% block bodyclass %}class="index"{% endblock %}

{% block main %}
<div class="add_comp_title">
    <h2>Highest Rated Companies</h2>
    <hr class="solid">
</div>

{% for company in companies %}
{% set company_obj = to_comp_obj(company) %}
<div class="company-rankings company-form container col-md-5">
    <div class="row">
        <div class="col">
            <!-- Company card -->
            <div class="card bg-light mb-3 border border-dark company-card">
                <div class="company-card-content">
                    <!-- Status icon and new links-->
                    <div class="row">
                        <a href={{url_for('company_page', companyID=company._id)}}
                            class="btn btn-primary-outline position-relative shadow-none col-md-3">
                            <img src={{url_for('file', filename=company_obj.logo_img)}} class="card-img" alt="...">
                            <span class="position-absolute top-10 start-90 translate-middle p-2
                                        bg-{{company_obj.category_badge(company_obj.company_rat)}}
                                        border border-light rounded-circle">
                            </span>
                        </a>
                        <div class="col mx-auto">
                            <div class="card-body">
                                <h4 class="card-title">
                                    <div class="company-title">
                                        <a href={{url_for('company_page', companyID=company._id)}}
                                            class="company-link">{{company_obj.name}}</a>
                                    </div>
                                </h4>

                                <h5 class="card-subtitle mb-2">Ranked <span class="text-success">#{{loop.index}}</span>
                                </h5>
                                <h6 class="card-subtitle mb-2 text-muted">{{company_obj.category}}</h6>

                                <div class="col review-section-content mx-auto">
                                    <div class="review-title-row row">
                                        <div class="col mx-auto">Overall</div>
                                        <div class="col mx-auto">Work Culture </div>
                                        <div class="col mx-auto">Company Culture</div>
                                    </div>

                                    <!-- Each company rating -->
                                    <div class="row">
                                        {%for rating in [company_obj.company_rat, company_obj.work_rat,
                                        company_obj.culture_rat]
                                        %}
                                        {% if rating != None %}
                                        <div class="col mx-auto">
                                            <span class="badge bg-{{company_obj.category_badge(rating)}}">
                                                {{'%0.1f'| format(rating | float)}}/5.0</span>
                                        </div>
                                        {% else %}
                                        <div class="col mx-auto text-muted">No reviews</div>
                                        {% endif%}
                                        {%endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{%endfor %}


{% endblock %}

{% block navbartype %}bottom{% endblock %}